
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content=device-width, initial-scale=1.0" />
  <title>24h Overtime Calculator</title>
  <link rel="manifest" href="manifest.json" />
  <script>
    function calculate() {
      const fixedStart = document.getElementById('fixedStart').value;
      const actualStart = document.getElementById('actualStart').value;
      const actualEnd = document.getElementById('actualEnd').value;

      const [fHours, fMinutes] = fixedStart.split(':').map(Number);
      const [aStartH, aStartM] = actualStart.split(':').map(Number);
      const [aEndH, aEndM] = actualEnd.split(':').map(Number);

      const fixedStartDt = new Date(0, 0, 0, fHours, fMinutes);
      const fixedEndDt = new Date(fixedStartDt.getTime() + 10.5 * 3600000);

      const actualStartDt = new Date(0, 0, 0, aStartH, aStartM);
      let actualEndDt = new Date(0, 0, 0, aEndH, aEndM);
      if (actualEndDt <= actualStartDt) {
        actualEndDt.setDate(actualEndDt.getDate() + 1);
      }

      const fixedStartTime = fixedStartDt.getTime();
      const fixedEndTime = fixedEndDt.getTime();
      const actualStartTime = actualStartDt.getTime();
      const actualEndTime = actualEndDt.getTime();

      const fixedDuration = fixedEndTime - fixedStartTime;
      const actualDuration = actualEndTime - actualStartTime;

      const regularEnd = new Date(actualStartDt.getTime() + fixedDuration);
      const regularStartStr = actualStartDt.toTimeString().slice(0, 5);
      const regularEndStr = regularEnd.toTimeString().slice(0, 5);

      const outsideFixedStart = (fixedStartTime - actualStartTime) > 0 ? (fixedStartTime - actualStartTime) / 3600000 : 0;
      const outsideFixedEnd = (actualEndTime - fixedEndTime) > 0 ? (actualEndTime - fixedEndTime) / 3600000 : 0;
      const outsideFixedTotal = outsideFixedStart + outsideFixedEnd;
      const overtimeHours = Math.max(0, actualDuration - fixedDuration) / 3600000;

      document.getElementById('results').innerHTML = `
        <p><strong>Total Hours Worked:</strong> ${(actualDuration / 3600000).toFixed(2)}</p>
        <p><strong>Regular Period:</strong> ${regularStartStr} to ${regularEndStr}</p>
        <p><strong>Overtime Hours:</strong> ${overtimeHours.toFixed(2)}</p>
        <p><strong>Time Outside Fixed Schedule:</strong> ${outsideFixedTotal.toFixed(2)} hours</p>
      `;
    }
  </script>
</head>
<body>
  <h1>24-Hour Overtime Calculator</h1>
  <label>Fixed Schedule Start (HH:mm): <input type="time" id="fixedStart" required></label><br />
  <label>Actual Start (HH:mm): <input type="time" id="actualStart" required></label><br />
  <label>Actual End (HH:mm): <input type="time" id="actualEnd" required></label><br />
  <button onclick="calculate()">Calculate</button>
  <div id="results" style="margin-top: 1em;"></div>
</body>
</html>
